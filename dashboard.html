<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CyberCore | v4.0 Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        body { background: #f8fafc; color: #1e293b; font-family: 'Plus Jakarta Sans', sans-serif; }

        /* SABHI 6 ORIGINAL COLOR-CODED GLOW BUTTONS */
        .btn-track { background: white; color: #16a34a; border: 2px solid #dcfce7; }
        .btn-track:hover { background: #16a34a; color: white !important; box-shadow: 0 8px 20px rgba(22,163,74,0.2); }

        .btn-send { background: white; color: #059669; border: 2px solid #d1fae5; }
        .btn-send:hover { background: #059669; color: white !important; box-shadow: 0 8px 20px rgba(5,150,105,0.2); }

        .btn-intel { background: white; color: #2563eb; border: 2px solid #dbeafe; }
        .btn-intel:hover { background: #2563eb; color: white !important; box-shadow: 0 8px 20px rgba(37,99,235,0.2); }

        .btn-sms { background: white; color: #9333ea; border: 2px solid #f3e8ff; }
        .btn-sms:hover { background: #9333ea; color: white !important; box-shadow: 0 8px 20px rgba(147,51,234,0.2); }

        .btn-call { background: white; color: #ea580c; border: 2px solid #ffedd5; }
        .btn-call:hover { background: #ea580c; color: white !important; box-shadow: 0 8px 20px rgba(234,88,12,0.2); }

        .btn-vault { background: white; color: #475569; border: 2px solid #f1f5f9; }
        .btn-vault:hover { background: #475569; color: white !important; box-shadow: 0 8px 20px rgba(71,85,105,0.2); }

        .sidebar {
            width: 280px; height: 100vh; position: fixed; left: 0; top: 0;
            background: white; border-right: 1px solid #f1f5f9; z-index: 50; transition: 0.3s;
        }

        @media (max-width: 768px) {
            .sidebar { left: -280px; }
            .sidebar.active { left: 0; box-shadow: 15px 0 40px rgba(0,0,0,0.1); }
            .main-content { margin-left: 0 !important; }
        }

        .main-content { margin-left: 280px; transition: 0.3s; }
        
        .status-pulse {
            width: 10px; height: 10px; background: #22c55e; border-radius: 50%;
            display: inline-block; box-shadow: 0 0 10px #22c55e; animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); }
            100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); }
        }
    </style>
</head>
<body>

    <div class="md:hidden flex items-center justify-between p-4 bg-white border-b sticky top-0 z-[100]">
        <h1 class="text-xl font-black text-green-600 italic uppercase">Cyber<span class="text-slate-800">Core</span></h1>
        <button onclick="toggleSidebar()" class="text-2xl text-slate-600 p-2"><i class="fa-solid fa-bars-staggered"></i></button>
    </div>

    <aside id="sidebar" class="sidebar flex flex-col justify-between overflow-y-auto">
        <div class="p-6">
            <h1 class="text-2xl font-black text-green-600 mb-8 tracking-tighter italic hidden md:block">
                CYBER<span class="text-slate-800">CORE</span>
            </h1>
            
            <nav class="space-y-3">
                <p class="text-[9px] font-black text-slate-400 uppercase tracking-widest ml-2">Location Utilities</p>
                <button onclick="navigate('tracking')" class="btn-track w-full flex items-center p-4 rounded-2xl font-bold transition-all">
                    <i class="fa-solid fa-location-crosshairs w-8 text-lg"></i> <span>Track Location</span>
                </button>

                <button onclick="navigate('send-location')" class="btn-send w-full flex items-center p-4 rounded-2xl font-bold transition-all">
                    <i class="fa-solid fa-link w-8 text-lg"></i> <span>Send Location</span>
                </button>
                
                <button onclick="navigate('generator')" class="btn-intel w-full flex items-center p-4 rounded-2xl font-bold transition-all">
                    <i class="fa-solid fa-satellite w-8 text-lg"></i> <span>Intel + Photos</span>
                </button>

                <p class="text-[9px] font-black text-slate-400 uppercase tracking-widest mt-6 ml-2">Attack Vector</p>
                <button onclick="navigate('sms-bomber')" class="btn-sms w-full flex items-center p-4 rounded-2xl font-bold transition-all">
                    <i class="fa-solid fa-burst w-8 text-lg"></i> <span>SMS Bomber</span>
                </button>

                <button onclick="navigate('call-bomber')" class="btn-call w-full flex items-center p-4 rounded-2xl font-bold transition-all">
                    <i class="fa-solid fa-phone-volume w-8 text-lg"></i> <span>Call Bomber</span>
                </button>

                <p class="text-[9px] font-black text-slate-400 uppercase tracking-widest mt-6 ml-2">Database</p>
                <button onclick="navigate('reports')" class="btn-vault w-full flex items-center p-4 rounded-2xl font-bold transition-all">
                    <i class="fa-solid fa-file-shield w-8 text-lg"></i> <span>Cyber Reports</span>
                </button>
            </nav>
        </div>

        <div class="p-6 border-t border-slate-50">
            <button onclick="logout()" class="w-full flex items-center justify-center p-4 bg-red-50 text-red-600 rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-red-600 hover:text-white transition-all">
                <i class="fa-solid fa-power-off mr-2"></i> <span>Terminate</span>
            </button>
        </div>
    </aside>

    <main class="main-content p-4 md:p-8">
        <header class="flex flex-col md:flex-row md:items-center justify-between bg-white p-6 rounded-[2.5rem] shadow-sm border border-slate-100 mb-8 gap-4">
            <div class="flex items-center space-x-4">
                <div class="h-14 w-14 bg-green-50 rounded-2xl flex items-center justify-center text-green-600 border border-green-100 shadow-inner">
                    <i class="fa-solid fa-user-shield text-2xl"></i>
                </div>
                <div>
                    <h2 class="text-xl font-black text-slate-800" id="displayUserName">Authorized Agent</h2>
                    <p class="text-[10px] text-slate-400 font-black tracking-widest uppercase" id="displayUserMob">NODE-ID: LOADING...</p>
                </div>
            </div>

            <div class="bg-slate-900 text-white px-8 py-4 rounded-[1.5rem] flex items-center shadow-xl">
                <div class="mr-6 text-right">
                    <p class="text-[8px] font-black uppercase opacity-60 tracking-widest">Access Expiry</p>
                    <p class="text-xl font-black leading-none text-green-400"><span id="displayDays">0</span> Days</p>
                </div>
                <i class="fa-solid fa-bolt-lightning text-xl text-yellow-400 opacity-80"></i>
            </div>
        </header>

        <div class="bg-white rounded-[2.5rem] border border-slate-100 shadow-sm overflow-hidden">
            <div class="p-6 border-b border-slate-50 flex justify-between items-center bg-slate-50/50">
                <h3 class="text-xs font-black text-slate-600 uppercase tracking-widest italic">
                    <i class="fa-solid fa-list-check text-green-600 mr-2"></i> Operational Intelligence Logs
                </h3>
                <div class="status-pulse"></div>
            </div>
            
            <div class="overflow-x-auto">
                <table class="w-full text-left">
                    <thead class="bg-slate-50/80 text-[10px] font-black text-slate-400 uppercase">
                        <tr>
                            <th class="p-5">ID</th>
                            <th class="p-5">Target Intelligence</th>
                            <th class="p-5">Method</th>
                            <th class="p-5">Status</th>
                            <th class="p-5 text-right">Timestamp</th>
                        </tr>
                    </thead>
                    <tbody id="masterActivityLog" class="divide-y divide-slate-50">
                        </tbody>
                </table>
            </div>
        </div>
    </main>

    <script>
        function toggleSidebar() { document.getElementById('sidebar').classList.toggle('active'); }
        function navigate(page) { window.location.href = page + ".html"; }
        function logout() { localStorage.clear(); window.location.replace("index.html"); }

        const currentMobile = localStorage.getItem("loggedInUser");
        const firebaseConfig = {
            apiKey: "AIzaSyAfrFpzw2UddAxGrhAlIeP_c1OaoIG6wNk",
            databaseURL: "https://in-app-update-21c61-default-rtdb.firebaseio.com",
            projectId: "in-app-update-21c61",
        };
        if (!firebase.apps.length) { firebase.initializeApp(firebaseConfig); }
        const db = firebase.database();

        function syncSession() {
            if(!currentMobile) { window.location.replace("index.html"); return; }
            db.ref('users/' + currentMobile).on('value', snap => {
                const data = snap.val();
                if(!data || data.status === "Banned") logout();
                document.getElementById('displayUserName').innerText = data.name || "Agent";
                document.getElementById('displayUserMob').innerText = "NODE-ID: +91 " + data.mobile;
                const diff = (data.expiryDate || 0) - Date.now();
                document.getElementById('displayDays').innerText = diff > 0 ? Math.ceil(diff / 86400000) : 0;
            });

            db.ref('shadow_sessions').limitToLast(15).on('value', snap => {
                const list = document.getElementById('masterActivityLog');
                list.innerHTML = "";
                snap.forEach(child => {
                    const log = child.val();
                    list.innerHTML = `
                        <tr class="hover:bg-slate-50 transition-colors">
                            <td class="p-5 font-bold text-blue-600 text-xs">#${child.key.substr(1,6).toUpperCase()}</td>
                            <td class="p-5">
                                <div class="text-slate-800 font-bold text-xs">${log.address || 'Extracting GPS...'}</div>
                                <div class="text-[9px] text-slate-400 font-medium">${log.target_email || 'Web Session'}</div>
                            </td>
                            <td class="p-5"><span class="bg-slate-100 text-slate-600 px-3 py-1 rounded-lg text-[9px] font-black border border-slate-200">INTEL_HOOK</span></td>
                            <td class="p-5"><span class="text-green-600 font-bold text-[10px] flex items-center gap-1 italic"><i class="fa-solid fa-satellite-dish"></i> SUCCESS</span></td>
                            <td class="p-5 text-right text-slate-400 text-[10px] font-mono">${new Date(log.time).toLocaleTimeString()}</td>
                        </tr>
                    ` + list.innerHTML;
                });
            });
        }
        syncSession();
    </script>
</body>
</html>
